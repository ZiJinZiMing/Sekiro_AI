--[[
排兵布阵脚本000140 - 双排交替编队
用途：创建一个左右交替排列的双排编队阵型
适用场景：开阔地带的多敌人协同作战，需要形成包围和交叉火力
战术特点：左右分布形成钳形攻势，多层次梯队确保持续压力

编队结构（双排交替布局）：
      成员0 (前锋)
成员1     成员2    第一排：左右包抄
成员3     成员4    第二排：中距离支援
成员5     成员6    第三排：远程控制

布局详解：
成员0：指挥官 (0, 0) - 位于编队中心前方，负责指挥和突破
成员1：左翼前锋 (-0.5, 0) - 左侧攻击位，形成左钳
成员2：右翼前锋 (0.5, 0) - 右侧攻击位，形成右钳
成员3：左翼支援 (-0.5, -1.5) - 左侧第二梯队，支援左翼
成员4：右翼支援 (0.5, -1.5) - 右侧第二梯队，支援右翼
成员5：左翼后卫 (-0.5, -3) - 左侧远程单位，控制左翼
成员6：右翼后卫 (0.5, -3) - 右侧远程单位，控制右翼

移动速率：指挥官1.2倍速度，略快于部队确保领导地位
--]]
function Platoon000140_Activate(f1_arg0)
    -- 启用排兵布阵移动模式
    f1_arg0:SetEnablePlatoonMove(true)

    -- 设置编队类型为纵向编队 (参数: 编队ID=0, 类型=2)
    -- 类型2适用于需要前后梯队配合的战术阵型
    f1_arg0:SetFormationType(0, 2)

    -- 设置各成员的相对位置参数 (成员索引, X偏移, Y偏移)
    -- 指挥官位置 - 编队核心，负责整体指挥
    f1_arg0:SetFormationParam(0, 0, 0)

    -- 第一排：前锋双翼，形成钳形攻势
    -- 左翼前锋 - 负责左侧突破和包抄
    f1_arg0:SetFormationParam(1, -0.5, 0)
    -- 右翼前锋 - 负责右侧突破和包抄
    f1_arg0:SetFormationParam(2, 0.5, 0)

    -- 第二排：中距离支援，紧跟前锋提供火力
    -- 左翼支援 - 支援左翼前锋，形成左侧攻击群
    f1_arg0:SetFormationParam(3, -0.5, -1.5)
    -- 右翼支援 - 支援右翼前锋，形成右侧攻击群
    f1_arg0:SetFormationParam(4, 0.5, -1.5)

    -- 第三排：远程控制，提供战术支援和控制
    -- 左翼后卫 - 控制左翼战场，提供远程火力
    f1_arg0:SetFormationParam(5, -0.5, -3)
    -- 右翼后卫 - 控制右翼战场，提供远程火力
    f1_arg0:SetFormationParam(6, 0.5, -3)

    -- 设置指挥官的移动速率为1.2倍
    -- 略快于普通成员，确保能够有效指挥和调度
    f1_arg0:SetBaseMoveRate(0, 1.2)

end

--[[
排兵布阵停用函数
功能：当双排交替编队解散时执行的清理操作
参数：f2_arg0 - 排兵布阵对象
说明：当前版本为空实现，可根据需要添加特定的清理逻辑
特殊考虑：双排编队解散时需要考虑左右翼的独立性
--]]
function Platoon000140_Deactivate(f2_arg0)
    -- 目前无特殊清理操作
    -- 双排编队可能需要的清理操作：
    -- - 重置左右翼分组状态
    -- - 清除钳形攻击标记
    -- - 恢复个体AI的独立决策
    -- - 重置前后梯队的协调状态
end

--[[
排兵布阵更新函数 - 双排交替编队控制
功能：每帧更新双排编队状态，维持阵型和协调
参数：f3_arg0 - 排兵布阵对象
执行频率：每游戏帧调用一次

双排编队特点：
- 左右分工明确，形成钳形攻势
- 前中后三个梯队层次分明
- 指挥官居中调度，确保协调一致
- 通过通用编队函数处理具体的移动和攻击逻辑

适用策略：
- 包围战术：左右两翼同时推进
- 交叉火力：多个梯队形成立体攻击
- 纵深防御：后排单位提供支援和控制
--]]
function Platoon000140_Update(f3_arg0)
    -- 直接调用通用编队处理函数
    -- 双排交替编队结构相对稳定，不需要特殊的状态检查
    -- 通用函数会处理：
    -- 1. 成员位置维持和调整
    -- 2. 编队移动的协调
    -- 3. 攻击时机的统一
    -- 4. 受到攻击时的阵型保持
    -- 5. 目标切换时的重新布阵
    Platoon_Common_Act(f3_arg0)

end


