--[[
排兵布阵脚本000160 - 分散式编队
用途：创建一个成员分散分布的非传统编队阵型
适用场景：复杂地形作战，需要分散压力和多点攻击
战术特点：成员分散布置，难以被一次性攻击，提供多角度威胁

编队结构（分散式布局）：
成员0,1：核心双人组 (0,0) - 位于编队中心，负责主要攻击
成员2：右后侧翼 (4,-4) - 远距离右侧侧翼攻击
成员3：左后侧翼 (-4,-4) - 远距离左侧侧翼攻击
成员4：中距离支援 (0,-3) - 中心后方支援位置
成员5：远程后卫 (-1,-8) - 最远距离控制和支援

布局特点：
- 核心区域：成员0和1重叠部署，形成强力核心
- 侧翼布控：成员2和3分别控制左右两翼，距离较远
- 纵深配置：成员4和5提供后方支援，形成多层次防护
- 分散优势：单次AOE攻击难以重创整个编队

移动速率：核心成员1.2倍速度，确保主攻优势
战术应用：适合对抗强力单体敌人或需要避免集中伤害的场合
--]]
function Platoon000160_Activate(f1_arg0)
    -- 启用排兵布阵移动模式
    f1_arg0:SetEnablePlatoonMove(true)

    -- 设置编队类型为纵向编队 (参数: 编队ID=0, 类型=2)
    -- 分散编队仍使用纵向类型，但通过位置参数实现分散效果
    f1_arg0:SetFormationType(0, 2)

    -- 设置各成员的相对位置参数 (成员索引, X偏移, Y偏移)
    -- 核心双人组 - 编队的主力，承担主要攻击任务
    f1_arg0:SetFormationParam(0, 0, 0)  -- 主核心
    f1_arg0:SetFormationParam(1, 0, 0)  -- 副核心，与主核心重叠部署

    -- 远程侧翼控制 - 距离较远，提供侧翼压力
    -- 右后侧翼 - 控制右侧战场，提供远程支援和包抄
    f1_arg0:SetFormationParam(2, 4, -4)
    -- 左后侧翼 - 控制左侧战场，与右翼形成钳形态势
    f1_arg0:SetFormationParam(3, -4, -4)

    -- 中距离支援 - 位于核心后方，提供快速支援
    f1_arg0:SetFormationParam(4, 0, -3)

    -- 远程后卫 - 最远距离的控制单位，负责整体协调
    -- 略偏左侧，与其他单位形成不规则分布
    f1_arg0:SetFormationParam(5, -1, -8)

    -- 设置核心成员的移动速率为1.2倍
    -- 确保核心双人组能够快速接敌，发挥主攻作用
    f1_arg0:SetBaseMoveRate(0, 1.2)

end

--[[
排兵布阵停用函数
功能：当分散式编队解散时执行的清理操作
参数：f2_arg0 - 排兵布阵对象
说明：当前版本为空实现，可根据需要添加特定的清理逻辑
特殊考虑：分散编队解散时各成员可能分布较远，需要特殊处理
--]]
function Platoon000160_Deactivate(f2_arg0)
    -- 目前无特殊清理操作
    -- 分散编队可能需要的清理操作：
    -- - 重新集合分散的成员
    -- - 清除远程侧翼的特殊状态
    -- - 重置核心双人组的协调模式
    -- - 恢复各成员的独立行动能力
    -- - 清理远距离成员的通信连接
end

--[[
排兵布阵更新函数 - 分散式编队控制
功能：每帧更新分散编队状态，维持分散阵型和成员协调
参数：f3_arg0 - 排兵布阵对象
执行频率：每游戏帧调用一次

分散编队特点：
- 成员分布范围大，需要特殊的协调机制
- 核心双人组需要密切配合
- 侧翼成员需要独立判断和支援
- 整体机动性相对较低，但抗打击能力强

适用策略：
- 多点攻击：各个方向同时施压
- 分散风险：避免集中受到重创
- 纵深防御：多层次的攻击和防护
- 持久作战：分散布局有利于持续战斗
--]]
function Platoon000160_Update(f3_arg0)
    -- 直接调用通用编队处理函数
    -- 分散编队的特殊性主要体现在位置配置上
    -- 通用函数可以处理大部分协调逻辑：
    -- 1. 维持各成员的相对位置关系
    -- 2. 协调核心双人组的行动
    -- 3. 管理远程侧翼的支援时机
    -- 4. 处理分散成员间的通信和协调
    -- 5. 应对战场变化时的阵型调整
    Platoon_Common_Act(f3_arg0)

end


